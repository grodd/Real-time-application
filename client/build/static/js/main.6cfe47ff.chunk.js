(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,n){},145:function(e,t){},158:function(e,t,n){},159:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(32),o=n.n(i),s=(n(94),n(14)),c=n(15),l=n(17),u=n(16),m=n(18),d=(n(95),n(10)),p=n(27),h=n(12),f=n(80),E=n(25),v=n(28),g=n(11),b={isAuthenticated:!1,user:{},users:[],notifications:[],showNotificationAlert:!1},_={departments:[]},N={pending:[],approved:[],forApproval:[],incomingRequests:[],rejected:[]},O=Object(E.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case"SET_CURRENT_USER":return Object(g.a)({},e,{isAuthenticated:!!t.payload.id,user:t.payload});case"SET_USERS":return Object(g.a)({},e,{users:t.users});case"SET_NOTIFICATIONS":return Object(g.a)({},e,{notifications:t.notifications});case"SET_NOTIFICATION_ALERT":return Object(g.a)({},e,{showNotificationAlert:t.alert});case"ADD_NOTIFICATION":return Object(g.a)({},e,{notifications:[t.notification].concat(Object(v.a)(e.notifications))});default:return e}},department:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DEPARTMENTS":return console.log(t),{departments:t.departments};default:return e}},request:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PENDING_REQUESTS":return Object(g.a)({},e,{pending:t.requests});case"SET_APPROVED_REQUESTS":return Object(g.a)({},e,{approved:t.requests});case"ADD_APPROVED_REQUEST":return Object(g.a)({},e,{approved:[t.request].concat(Object(v.a)(e.approved))});case"REMOVE_INCOMING_REQUEST":var n=e.incomingRequests.filter(function(e){return e._id!=t.id});return Object(g.a)({},e,{incomingRequests:n});case"ADD_INCOMING_REQUEST":return Object(g.a)({},e,{incomingRequests:[t.request].concat(Object(v.a)(e.incomingRequests))});case"SET_INCOMING_REQUESTS":return Object(g.a)({},e,{incomingRequests:t.requests});case"ADD_PENDING_REQUEST":return Object(g.a)({},e,{pending:[t.request].concat(Object(v.a)(e.pending))});case"REMOVE_PENDING_REQUEST":var a=e.pending.filter(function(e){return e._id!=t.id});return Object(g.a)({},e,{pending:a});case"SET_REJECTED_REQUESTS":return Object(g.a)({},e,{rejected:t.requests});case"ADD_REJECTED_REQUEST":return Object(g.a)({},e,{rejected:[t.request].concat(Object(v.a)(e.rejected))});default:return e}}}),j=[f.a],y=Object(E.e)(O,[],Object(E.d)(E.a.apply(void 0,j))),R=n(2),q=(n(100),n(9)),S=n.n(q),w=n(43),C=n.n(w),T=function(e){e?S.a.defaults.headers.common.Authorization=e:delete S.a.defaults.headers.common.Authorization},I=n(81),k=n.n(I)()("/request"),D=function(e){return{type:"SET_CURRENT_USER",payload:e}},A=function(e){return{type:"SET_NOTIFICATION_ALERT",alert:e}},U=function(e,t,n,a){return{CREATE_REQUEST:"".concat(t,' has created the request "').concat(a,'" for ').concat(n),REQUEST_APPROVED:"".concat(n,' has approved the request "').concat(a,'" created by ').concat(t),REQUEST_REJECTED:"".concat(n,' has rejected the request "').concat(a,'" created by ').concat(t),DELETE_PENDING_REQUEST:"".concat(t,' has deleted the request "').concat(a,'" created for ').concat(n)}[e]},x=n(160),P=n(161),M=n(163),Q=n(162),G=n(36),L=n(34),V=n.n(L),F=n(13),W=n.n(F),J=n(50),Y=n.n(J),z=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e)))._renderNotification=n._renderNotification.bind(Object(R.a)(n)),n.setNotificationAlert=n.setNotificationAlert.bind(Object(R.a)(n)),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){0===this.props.notifications.length&&this.props.getNotifications().then(function(e){})}},{key:"setNotificationAlert",value:function(){this.props.getNotificationAlert(!1)}},{key:"_renderNotification",value:function(){var e=this.props,t=e.notifications,n=e.user;if(t.length>0)return t.map(function(e){var t,a,i,o;switch(e.type){case G.create_request:case G.request_approved:case G.request_rejected:case G.delete_pending_request:a=e.actor_id.name,i=e.request_for.name,o=e.payload.request_text}return n.id==e.request_for._id&&(i="you"),t=U(e.type,a,i,o),r.a.createElement(x.a,{className:"notification-item"},r.a.createElement("div",{className:"notif-grammer"},t),r.a.createElement("div",{className:"request-item-top"},V()(new Date(e.created_at)).format("DD MMM YY")," "))})}},{key:"render",value:function(){var e=this.props.showNotificationAlert;return r.a.createElement(P.a,{isOpen:this.props.dropdownOpen,toggle:this.props.toggle},r.a.createElement(M.a,{tag:"span"},r.a.createElement("div",{className:"nav_item common-pointer"},r.a.createElement("i",{class:"material-icons",onClick:this.setNotificationAlert},"notifications"),r.a.createElement("div",{className:W()("notification-alert",{isAlert:e})}))),r.a.createElement(Q.a,{className:"notification-menu",right:!0},r.a.createElement(x.a,{header:!0},"Notifications"),this._renderNotification()))}}]),t}(a.Component),B=Object(p.f)(Object(h.b)(function(e){return{notifications:e.auth.notifications,user:e.auth.user,showNotificationAlert:e.auth.showNotificationAlert}},{getNotifications:function(){return function(e){return S.a.get("/api/request/notifications").then(function(t){return t.data.success&&e({type:"SET_NOTIFICATIONS",notifications:t.data.notifications}),t})}},getNotificationAlert:function(e){return function(e){e(A(!1))}}})(z)),$=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={showNavSidebar:!1,showCollapseIcon:!1,dropdownOpen:!1},n.toggle=n.toggle.bind(Object(R.a)(n)),n.onItemClick=n.onItemClick.bind(Object(R.a)(n)),n.handleLogout=n.handleLogout.bind(Object(R.a)(n)),n.handleRegister=n.handleRegister.bind(Object(R.a)(n)),n.handleLogin=n.handleLogin.bind(Object(R.a)(n)),n.toggleNotification=n.toggleNotification.bind(Object(R.a)(n)),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"toggleNotification",value:function(){this.setState({dropdownOpen:!this.state.dropdownOpen})}},{key:"componentWillMount",value:function(){var e=this;window.innerWidth<600&&this.setState({showCollapseIcon:!0}),window.addEventListener("resize",function(){window.innerWidth<600?e.setState({showCollapseIcon:!0}):e.setState({showCollapseIcon:!1,showNavSidebar:!1})})}},{key:"componentDidMount",value:function(){this.props.getUserInfo().then(function(e){})}},{key:"handleRegister",value:function(){this.props.history.push("/register"),this.setState({showNavSidebar:!1})}},{key:"handleLogout",value:function(){this.props.logout(),this.setState({showNavSidebar:!1}),this.props.history.push("/login")}},{key:"handleLogin",value:function(){this.props.history.push("/login")}},{key:"toggle",value:function(){this.setState({showNavSidebar:!this.state.showNavSidebar})}},{key:"onItemClick",value:function(){this.setState({showNavSidebar:!1})}},{key:"render",value:function(){var e=this.props.auth,t=this.state.dropdownOpen;return r.a.createElement("div",null,r.a.createElement("div",{className:"nav"},r.a.createElement("div",{className:"d-flex justify-content-between align-items-center nav-top"},r.a.createElement("div",{className:"nav-brand"},r.a.createElement("img",{src:"website_logo.png",alt:"switch on logo"})),this.state.showCollapseIcon?r.a.createElement("div",{className:"collapse-navbar common-pointer",onClick:this.toggle},r.a.createElement("div",{className:"collapsible-nav-icon"}),r.a.createElement("div",{className:"collapsible-nav-icon"}),r.a.createElement("div",{className:"collapsible-nav-icon"})):e.isAuthenticated?r.a.createElement("div",{className:"d-flex align-items-center nav_item_right"},r.a.createElement("div",{className:"nav_item"}," ",r.a.createElement(d.b,{to:"/"},"Create")),r.a.createElement("div",{className:"nav_item"}," ",r.a.createElement(d.b,{to:"/approved"},"Approved")),r.a.createElement("div",{className:"nav_item"}," ",r.a.createElement(d.b,{to:"/pending"},"Pending")),r.a.createElement("div",{className:"nav_item"}," ",r.a.createElement(d.b,{to:"/rejected"},"Rejected")),r.a.createElement("div",{className:"nav_item"}," ",r.a.createElement(d.b,{to:"/incoming-request"},"Incoming Request")),r.a.createElement("div",{className:"nav_item",onClick:this.toggleNotification},r.a.createElement(B,{dropdownOpen:t,toggle:this.toggleNotification})),r.a.createElement("div",{className:"nav-sidebar-item common-pointer",onClick:this.handleLogout},"Logout")):null)),this.state.showNavSidebar&&r.a.createElement("div",{className:"d-flex justify-content-end nav-navbar"},r.a.createElement("div",{className:"navbar-container"},e.isAuthenticated?r.a.createElement("ul",{className:"nav-sidebar-items"},r.a.createElement("li",{className:"nav-sidebar-item common-pointer"}),r.a.createElement("li",{className:"nav-sidebar-item common-pointer",onClick:this.onItemClick},r.a.createElement(d.b,{to:"/pending"},"Pending")),r.a.createElement("li",{className:"nav-sidebar-item common-pointer",onClick:this.onItemClick},r.a.createElement(d.b,{to:"/approved"},"Approved")),r.a.createElement("li",{className:"nav-sidebar-item common-pointer",onClick:this.onItemClick},r.a.createElement(d.b,{to:"/incoming-request"},"Incoming Request")),r.a.createElement("li",{className:"nav-sidebar-item common-pointer",onClick:this.onItemClick},"notif"),r.a.createElement("hr",{classname:"nav-sidebar-item-divider common-pointer"}),r.a.createElement("li",{className:"nav-sidebar-item common-pointer",onClick:this.handleLogout},"Logout")):r.a.createElement("ul",{className:"nav-sidebar-items common-pointer"},r.a.createElement("li",{className:"nav-sidebar-item common-pointer",onClick:this.handleRegister},"Register"),r.a.createElement("li",{className:"nav-sidebar-item common-pointer",onClick:this.handleLogin},"Login")))))}}]),t}(a.Component),H=Object(p.f)(Object(h.b)(function(e){return{auth:e.auth}},{logout:function(){return function(e){localStorage.removeItem("jwtToken"),e(D({}))}},getUserInfo:function(){return function(e){return S.a.get("/api/request/getUserInfo").then(function(t){return t.data.success&&(k.emit("initClientInfo",{userId:t.data.user._id}),k.on("new-incoming-request",function(t){e({type:"ADD_INCOMING_REQUEST",request:t})}),k.on("remove-incoming-request",function(t){e({type:"REMOVE_INCOMING_REQUEST",id:t._id})}),k.on("delete-pending-request",function(t){e({type:"REMOVE_INCOMING_REQUEST",id:t._id})}),k.on("request-approved",function(t){e({type:"REMOVE_INCOMING_REQUEST",id:t._id}),e({type:"REMOVE_PENDING_REQUEST",id:t._id}),e({type:"ADD_APPROVED_REQUEST",request:t})}),k.on("request-rejected",function(t){e({type:"REMOVE_INCOMING_REQUEST",id:t._id}),e({type:"REMOVE_PENDING_REQUEST",id:t._id}),e({type:"ADD_REJECTED_REQUEST",request:t})}),k.on("notification",function(t){e({type:"ADD_NOTIFICATION",notification:t}),e(A(!0))})),t})}}})($)),K=n(87),X=Object(h.b)(function(e){return{auth:e.auth}})(function(e){var t=e.component,n=e.auth,a=Object(K.a)(e,["component","auth"]);return r.a.createElement(p.b,Object.assign({},a,{render:function(e){return!0===n.isAuthenticated?r.a.createElement(t,e):r.a.createElement(p.a,{to:"/login"})}}))}),Z=n(23),ee=function(e){var t=e.name,n=e.value,a=e.type,i=e.placeholder,o=e.label,s=e.error,c=e.onChange,l=e.disabled;return r.a.createElement("div",{className:"form-group"},o&&r.a.createElement("label",{className:W()("d-flex form_label"),htmlFor:t},o),r.a.createElement("input",{type:a,value:n,className:W()("form-control input-field",{"is-valid":s}),name:t,placeholder:i,onChange:c,disabled:l}),s&&r.a.createElement("div",{className:"error-info"},s))};ee.defaultProps={type:"text"};var te=ee,ne=(n(49),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={email:"",password:"",errors:{}},n.onChange=n.onChange.bind(Object(R.a)(n)),n.onSubmit=n.onSubmit.bind(Object(R.a)(n)),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"onChange",value:function(e){this.setState(Object(Z.a)({},e.target.name,e.target.value))}},{key:"componentWillMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/")}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();this.props.loginUser;var n=this.state,a={email:n.email,password:n.password};this.props.loginUser(a).then(function(e){if(e.data.success)t.props.history.push("/");else{var n=e.data.errors,a={};n.email&&(a.email=n.email),n.password&&(a.password=n.password),t.setState({errors:a})}})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},r.a.createElement("div",{className:"login-form-container"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-center   form-header"},r.a.createElement("div",{className:"login-intro-text"},r.a.createElement("div",{className:"text-14"},"Login or Sign up to our community"))),r.a.createElement("div",{className:"form-container"},r.a.createElement("form",{className:"d-flex flex-column justify-content-center",onSubmit:this.onSubmit},r.a.createElement(te,{name:"email",type:"email",label:"Email",value:this.state.email,placeholder:"Email Address",onChange:this.onChange,error:e.email}),r.a.createElement(te,{name:"password",type:"password",label:"Password",onChange:this.onChange,value:this.state.password,placeholder:"Password",error:e.password}),r.a.createElement("input",{className:"common-pointer btn btn-primary auth-submit-button",type:"submit",value:"Login"}))),r.a.createElement("div",{className:"d-flex justify-content-center align-items-center"},r.a.createElement("div",null,"don't have account? "),r.a.createElement("div",{className:"common-pointer or-sign-up-btn"},r.a.createElement(d.b,{to:"/register"},"Sign Up")))))}}]),t}(a.Component)),ae=Object(p.f)(Object(h.b)(function(e){return{auth:e.auth}},{loginUser:function(e){return function(t){return S.a.post("/api/users/login",e).then(function(e){if(e.data.success){var n=e.data.token;localStorage.setItem("jwtToken",n),T(n);var a=C()(n);t(D(a))}return e}).catch(function(e){return e})}}})(ne)),re=function(e){return{type:"SET_DEPARTMENTS",departments:e}},ie=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e)))._renderdepartmentOptions=function(){var e=n.props.departments;return e.length>0?e.map(function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.name)}):null},n.state={name:"",email:"",password:"",confirmPassword:"",errors:{},department_id:""},n.onChange=n.onChange.bind(Object(R.a)(n)),n.onSubmit=n.onSubmit.bind(Object(R.a)(n)),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.props.getDepartments(),this.props.auth.isAuthenticated&&this.props.history.push("/")}},{key:"onChange",value:function(e){this.setState(Object(Z.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var n=this.props.registerUser,a=this.state;n({name:a.name,email:a.email,password:a.password,confirmPassword:a.confirmPassword,department_id:a.department_id}).then(function(e){if(e.data.success)t.props.history.push("/login");else{var n=e.data.errors,a={};n.email&&(a.email=n.email),n.password&&(a.password=n.password),n.confirmPassword&&(a.confirmPassword=n.confirmPassword),n.department_id&&(a.department_id=n.department_id),n.name&&(a.name=n.name),t.setState({errors:a})}})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},r.a.createElement("div",{className:"login-form-container"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-center form-header"},r.a.createElement("h2",null,"Register")),r.a.createElement("div",{className:"form-container"},r.a.createElement("form",{className:"d-flex flex-column justify-content-center",onSubmit:this.onSubmit},r.a.createElement(te,{name:"name",type:"name",label:"Name",value:this.state.name,placeholder:"Full Name",onChange:this.onChange,error:e.name}),r.a.createElement(te,{name:"email",type:"email",label:"Email",value:this.state.email,placeholder:"Email Address",onChange:this.onChange,error:e.email}),r.a.createElement(te,{name:"password",type:"password",label:"Password",onChange:this.onChange,value:this.state.password,placeholder:"Password",error:e.password}),r.a.createElement(te,{name:"confirmPassword",type:"password",label:"Confirm Password",onChange:this.onChange,value:this.state.confirmPassword,placeholder:"Confirm Password",error:e.confirmPassword}),r.a.createElement("div",{className:"custom-select-container"},r.a.createElement("select",{className:"select-department-item",name:"department_id",value:this.state.department_id,onChange:this.onChange},r.a.createElement("option",{key:"1",value:""},"Select Department"),this._renderdepartmentOptions()),e.department_id&&r.a.createElement("div",{className:"error-info"},e.department_id)),r.a.createElement("input",{className:"btn btn-primary auth-submit-button",type:"submit",value:"Register"})))))}}]),t}(a.Component),oe=Object(p.f)(Object(h.b)(function(e){return{auth:e.auth,errors:e.errors,departments:e.department.departments}},{registerUser:function(e){return function(t){return S.a.post("/api/users/register",e).then(function(e){return e.data.success,e})}},getDepartments:function(){return function(e){return S.a.get("/api/department/getDepartments").then(function(t){return t.data.success&&e(re(t.data.departments)),t})}}})(ie)),se=(n(157),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={type:"",dropdownOpen:!1},n.toggle=n.toggle.bind(Object(R.a)(n)),n._renderOption=n._renderOption.bind(Object(R.a)(n)),n.deleteRequest=n.deleteRequest.bind(Object(R.a)(n)),n._renderInfo=n._renderInfo.bind(Object(R.a)(n)),n.updateRequest=n.updateRequest.bind(Object(R.a)(n)),n._renderUpdateTime=n._renderUpdateTime.bind(Object(R.a)(n)),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"toggle",value:function(){this.setState({dropdownOpen:!this.state.dropdownOpen})}},{key:"deleteRequest",value:function(){var e=this.props,t=e.deleteRequest;t(e.request._id).then(function(e){console.log(e)})}},{key:"updateRequest",value:function(e){var t=this.props,n=t.updateRequest;n(t.request._id,e).then(function(e){console.log(e)})}},{key:"_renderInfo",value:function(){var e=this.props,t=(e.type,e.request);return r.a.createElement("div",{className:"d-flex request-item-title"},r.a.createElement("div",{clasName:"title-text"},"Reques for : ",t.created_for.name),r.a.createElement("div",{className:"dept-info"},"("," Dept : ",t.created_for.department_id.name," ",")"))}},{key:"_renderUpdateTime",value:function(){var e,t=this.props,n=t.type,a=t.request,i=V()(new Date(a.updated_on)).format("DD MMM YY");return"approved"===n?e="Approved on : ".concat(i):"rejected"===n&&(e="Rejected On : ".concat(i)),r.a.createElement("div",{className:"request-item-footer"},e)}},{key:"_renderOption",value:function(){var e,t=this,n=this.props,a=n.type,i=n.request,o=n.user.id;if("pending"===a)e=r.a.createElement(x.a,{onClick:this.deleteRequest},"Delete");else if("approved"===a);else if("incoming-request"===a){if(console.log(o),console.log(i.created_for._id),i.created_for._id!=o)return null;e=r.a.createElement("div",null,r.a.createElement(x.a,{onClick:function(){return t.updateRequest({status:"approved"})}},"Approve"),r.a.createElement(x.a,{onClick:function(){return t.updateRequest({status:"rejected"})}},"Reject"))}return"pending"===a||"incoming-request"===a?r.a.createElement(P.a,{isOpen:this.state.dropdownOpen,toggle:this.toggle},r.a.createElement(M.a,{tag:"span",className:"common-pointer"},r.a.createElement("i",{class:"material-icons"},"more_vert")),r.a.createElement(Q.a,{right:!0},e)):null}},{key:"render",value:function(){var e=this.props,t=e.request,n=e.type;return r.a.createElement("div",{className:"request-item-container"},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",null,r.a.createElement("div",{className:"request-item-top"},"Created on :",V()(new Date(t.created_at)).format("DD MMM YY")," "),r.a.createElement("div",{className:"request-text-box"},t.text)),this._renderOption()),this._renderInfo(),("rejected"===n||"approved"===n)&&this._renderUpdateTime())}}]),t}(a.Component)),ce=Object(p.f)(Object(h.b)(function(e){return{user:e.auth.user}},{deleteRequest:function(e){return function(t){return S.a.delete("/api/request/".concat(e)).then(function(n){return n.data.success&&t(function(e){return{type:"REMOVE_PENDING_REQUEST",id:e}}(e)),n})}},updateRequest:function(e,t){return function(n){return S.a.put("/api/request/".concat(e),t).then(function(t){return t.data.success&&n(function(e){return{type:"REMOVE_INCOMING_REQUEST",id:e}}(e)),t})}}})(se)),le=(n(158),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={type:""},n._renderRequests=n._renderRequests.bind(Object(R.a)(n)),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.location.pathname,t=this.props.auth.user,n=this.props,a=n.pending,r=n.approved,i=n.rejected,o=n.incomingRequests,s=n.getPendingRequests,c=n.getApprovedRequests,l=n.getIncomingRequests,u=n.getRejectedRequests;"/pending"===e?(this.setState({type:"pending"}),0===a.length&&s().then(function(e){})):"/approved"===e?(this.setState({type:"approved"}),0===r.length&&c().then(function(e){})):"/incoming-request"===e?(this.setState({type:"incoming-request"}),0===o.length&&l(t.department_id).then(function(e){})):"/rejected"===e&&(this.setState({type:"rejected"}),0===i.length&&u().then(function(e){}))}},{key:"_renderRequests",value:function(){var e=this.state.type,t=this.props,n=t.pending,a=t.approved,i=t.incomingRequests,o=t.rejected,s=[];return"pending"===e?s=n:"approved"===e?s=a:"incoming-request"===e?s=i:"rejected"===e&&(s=o),s.length>0?s.map(function(t){return r.a.createElement(Y.a,{height:100},r.a.createElement(ce,{key:t._id,type:e,request:t}))}):null}},{key:"render",value:function(){return r.a.createElement("div",{className:"d-flex flex-column align-items-center justify-content-center request-container"},this._renderRequests())}}]),t}(a.Component)),ue=Object(p.f)(Object(h.b)(function(e){return{auth:e.auth,departments:e.department.departments,pending:e.request.pending,approved:e.request.approved,incomingRequests:e.request.incomingRequests,rejected:e.request.rejected}},{getPendingRequests:function(){return function(e){return S.a.get("/api/request/pending").then(function(t){return t.data.success&&e({type:"SET_PENDING_REQUESTS",requests:t.data.requests}),t})}},getApprovedRequests:function(){return function(e){return S.a.get("/api/request/approved").then(function(t){return t.data.success&&e({type:"SET_APPROVED_REQUESTS",requests:t.data.requests}),t})}},getIncomingRequests:function(e){return function(t){return S.a.get("/api/request/".concat(e,"/incoming")).then(function(e){return e.data.success&&t({type:"SET_INCOMING_REQUESTS",requests:e.data.requests}),e})}},getRejectedRequests:function(){return function(e){return S.a.get("/api/request/rejected").then(function(t){return t.data.success&&e({type:"SET_REJECTED_REQUESTS",requests:t.data.requests}),t})}}})(le)),me=function(e){var t=e.name,n=e.placeholder,a=e.value,i=e.error,o=e.info,s=e.onChange;return r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{className:W()("form-control form-control-lg",{"is-invalid":i}),placeholder:n,name:t,value:a,onChange:s}),o&&r.a.createElement("small",{className:"form-text text-muted"},o),i&&r.a.createElement("div",{className:"error-info"},i))},de=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e)))._renderdepartmentOptions=function(){var e=n.props.departments;return e.length>0?e.map(function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.name)}):null},n._renderUserOptions=function(){var e=n.props.users;return e.length>0?e.map(function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.name)}):null},n.state={text:"",created_for:"",errors:{},department_id:""},n.onChange=n.onChange.bind(Object(R.a)(n)),n.onSubmit=n.onSubmit.bind(Object(R.a)(n)),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.props.getDepartmentsForReq()}},{key:"onChange",value:function(e){if("department_id"===e.target.name){var t=e.target.value;this.props.getDepartmentUsers(t).then(function(e){console.log(e.data)})}this.setState(Object(Z.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){e.preventDefault();var t=this.props.createRequest,n=this.state,a=n.text,r=n.created_for,i=n.department_id,o={};(""===a&&(o.text="Message field is required"),""===r&&(o.created_for="Select a user to send a request"),""===i&&(o.department_id="Department field is required"),o.text||o.department_id||o.created_for)?this.setState({errors:o}):t({text:a,department_id:i,created_for:r})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},r.a.createElement("div",{className:"login-form-container"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-center form-header"},r.a.createElement("h2",null,"Create Request")),r.a.createElement("div",{className:"form-container"},r.a.createElement("form",{className:"d-flex flex-column justify-content-center",onSubmit:this.onSubmit},r.a.createElement(me,{name:"text",type:"text",label:"Message",value:this.state.text,placeholder:"Type Message",onChange:this.onChange}),e.text&&r.a.createElement("div",{className:"error-info"},e.text),r.a.createElement("div",{className:"custom-select-container"},r.a.createElement("select",{className:"select-department-item",name:"department_id",value:this.state.department_id,onChange:this.onChange},r.a.createElement("option",{key:"1",value:""},"Select Department"),this._renderdepartmentOptions()),e.department_id&&r.a.createElement("div",{className:"error-info"},e.department_id)),this.state.department_id&&r.a.createElement("div",{className:"custom-select-container"},r.a.createElement("select",{className:"select-department-item",name:"created_for",value:this.state.created_for,onChange:this.onChange},r.a.createElement("option",{key:"1",value:""},"Select User"),this._renderUserOptions()),e.created_for&&r.a.createElement("div",{className:"error-info"},e.created_for)),r.a.createElement("input",{className:"btn btn-primary auth-submit-button",type:"submit",value:"Send Request"})))))}}]),t}(a.Component),pe=Object(p.f)(Object(h.b)(function(e){return{auth:e.auth,users:e.auth.users,errors:e.errors,departments:e.department.departments}},{createRequest:function(e){return function(t){return S.a.post("/api/request",e).then(function(e){return e.data.success&&t({type:"ADD_PENDING_REQUEST",request:e.data.request}),e})}},getDepartmentsForReq:function(){return function(e){return S.a.get("/api/department/getDepartmentsForReq").then(function(t){return t.data.success&&e(re(t.data.departments)),t})}},getDepartmentUsers:function(e){return function(t){return S.a.get("/api/users/".concat(e)).then(function(e){return e.data.success&&t({type:"SET_USERS",users:e.data.users}),e})}}})(de));if(localStorage.jwtToken){T(localStorage.jwtToken);var he=C()(localStorage.jwtToken);y.dispatch(D(he))}var fe=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,{store:y},r.a.createElement(d.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(H,null),r.a.createElement(p.b,{exact:!0,path:"/login",component:ae}),r.a.createElement(p.b,{exact:!0,path:"/register",component:oe}),r.a.createElement(p.d,null,r.a.createElement(X,{exact:!0,path:"/pending",component:ue})),r.a.createElement(p.d,null,r.a.createElement(X,{exact:!0,path:"/",component:pe})),r.a.createElement(p.d,null,r.a.createElement(X,{exact:!0,path:"/approved",component:ue})),r.a.createElement(p.d,null,r.a.createElement(X,{exact:!0,path:"/incoming-request",component:ue})),r.a.createElement(p.d,null,r.a.createElement(X,{exact:!0,path:"/rejected",component:ue})))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},36:function(e){e.exports={create_request:"CREATE_REQUEST",delete_pending_request:"DELETE_PENDING_REQUEST",request_approved:"REQUEST_APPROVED",request_rejected:"REQUEST_REJECTED"}},49:function(e,t,n){},89:function(e,t,n){e.exports=n(159)},94:function(e,t,n){},95:function(e,t,n){}},[[89,1,2]]]);
//# sourceMappingURL=main.6cfe47ff.chunk.js.map